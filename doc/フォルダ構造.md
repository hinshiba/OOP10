# プロジェクトフォルダ構成

```
PlusPim/
│
├── PlusPim.sln                          # ソリューションファイル
│
├── src/
│   │
│   ├── PlusPim.Shared/                  # 共通インターフェース・モデル
│   │   ├── Interfaces/
│   │   │   ├── ICompilerService.cs
│   │   │   ├── IDebuggerService.cs
│   │   │   └── IRuntimeService.cs
│   │   ├── Models/
│   │   │   ├── ExecutionState.cs
│   │   │   ├── CompilationResult.cs
│   │   │   └── SourceMap.cs
│   │   └── PlusPim.Shared.csproj
│   │
│   ├── PlusPim.Compiler/                # 拡張構文処理・レジスタ割り付け
│   │   ├── Lexing/
│   │   │   ├── ILexer.cs
│   │   │   ├── ExtendedLexer.cs
│   │   │   └── Token.cs
│   │   ├── Parsing/
│   │   │   ├── IParser.cs
│   │   │   ├── ExtendedParser.cs
│   │   │   └── AST/
│   │   ├── RegisterAllocation/
│   │   │   ├── IRegisterAllocator.cs
│   │   │   ├── RegisterAllocator.cs
│   │   │   ├── Strategies/
│   │   │   │   ├── IAllocationStrategy.cs
│   │   │   │   ├── GraphColoringStrategy.cs
│   │   │   │   └── LinearScanStrategy.cs
│   │   │   ├── Liveness/
│   │   │   │   └── LivenessAnalyzer.cs
│   │   │   └── Spilling/
│   │   │       ├── ISpillHandler.cs
│   │   │       └── StackSpillHandler.cs
│   │   ├── CodeGeneration/
│   │   │   ├── ICodeGenerator.cs
│   │   │   └── MipsCodeGenerator.cs
│   │   ├── Assembly/
│   │   │   ├── IAssembler.cs
│   │   │   └── Assembler.cs
│   │   ├── Services/
│   │   │   └── CompilerService.cs
│   │   └── PlusPim.Compiler.csproj
│   │
│   ├── PlusPim.Runtime/                 # 実行・エミュレーション
│   │   ├── Processor/
│   │   │   ├── IProcessor.cs
│   │   │   ├── MipsProcessor.cs
│   │   │   └── ExecutionContext.cs
│   │   ├── Memory/
│   │   │   ├── IMemory.cs
│   │   │   ├── Memory.cs
│   │   │   └── Segments/
│   │   │       ├── IMemorySegment.cs
│   │   │       ├── TextSegment.cs
│   │   │       ├── DataSegment.cs
│   │   │       ├── HeapSegment.cs
│   │   │       └── StackSegment.cs
│   │   ├── RegisterFile/
│   │   │   ├── IRegisterFile.cs
│   │   │   └── RegisterFile.cs
│   │   ├── Instructions/
│   │   │   ├── IInstruction.cs
│   │   │   ├── IInstructionSet.cs
│   │   │   ├── BaseInstruction.cs
│   │   │   ├── Mips32InstructionSet.cs
│   │   │   └── Implementations/
│   │   │       ├── AddInstruction.cs
│   │   │       ├── LoadWordInstruction.cs
│   │   │       └── ... (50+ files)
│   │   ├── Syscall/
│   │   │   ├── ISyscallHandler.cs
│   │   │   └── SyscallHandler.cs
│   │   ├── Services/
│   │   │   └── RuntimeService.cs
│   │   └── PlusPim.Runtime.csproj
│   │
│   ├── PlusPim.Debugger/                # デバッグ機能
│   │   ├── Core/
│   │   │   ├── IDebugger.cs
│   │   │   └── Debugger.cs
│   │   ├── Breakpoints/
│   │   │   ├── IBreakpointManager.cs
│   │   │   ├── BreakpointManager.cs
│   │   │   └── Types/
│   │   │       ├── IBreakpoint.cs
│   │   │       ├── LineBreakpoint.cs
│   │   │       ├── ConditionalBreakpoint.cs
│   │   │       └── DataBreakpoint.cs
│   │   ├── TimeTravel/
│   │   │   ├── ITimeTravel.cs
│   │   │   ├── TimeTravelEngine.cs
│   │   │   └── Snapshots/
│   │   │       ├── ExecutionSnapshot.cs
│   │   │       └── SnapshotManager.cs
│   │   ├── CallStack/
│   │   │   └── CallStackAnalyzer.cs
│   │   ├── Services/
│   │   │   └── DebuggerService.cs
│   │   └── PlusPim.Debugger.csproj
│   │
│   └── PlusPim.Presentation/            # GUI (Avalonia MVVM)
│       ├── ViewModels/
│       │   ├── ViewModelBase.cs
│       │   ├── MainViewModel.cs
│       │   ├── EditorViewModel.cs
│       │   ├── RegisterViewModel.cs
│       │   ├── MemoryViewModel.cs
│       │   ├── DebugControlViewModel.cs
│       │   ├── BreakpointViewModel.cs
│       │   └── TimeTravelViewModel.cs
│       ├── Views/
│       │   ├── MainWindow.axaml
│       │   ├── MainWindow.axaml.cs
│       │   ├── EditorView.axaml
│       │   ├── RegisterView.axaml
│       │   └── MemoryView.axaml
│       ├── Commands/
│       │   ├── ICommand.cs
│       │   ├── AsyncCommand.cs
│       │   └── RelayCommand.cs
│       ├── Services/
│       │   ├── IDialogService.cs
│       │   ├── AvaloniaDialogService.cs
│       │   ├── IProjectManager.cs
│       │   └── ProjectManager.cs
│       ├── Converters/
│       │   ├── HexConverter.cs
│       │   └── BoolToVisibilityConverter.cs
│       ├── App.axaml
│       ├── App.axaml.cs
│       ├── Program.cs
│       └── PlusPim.Presentation.csproj
│
├── tests/
│   ├── PlusPim.Compiler.Tests/
│   │   ├── RegisterAllocation/
│   │   │   ├── RegisterAllocatorTests.cs
│   │   │   └── GraphColoringStrategyTests.cs
│   │   └── PlusPim.Compiler.Tests.csproj
│   │
│   ├── PlusPim.Runtime.Tests/
│   │   ├── Processor/
│   │   │   └── MipsProcessorTests.cs
│   │   ├── Memory/
│   │   │   └── MemoryTests.cs
│   │   └── PlusPim.Runtime.Tests.csproj
│   │
│   ├── PlusPim.Debugger.Tests/
│   │   └── PlusPim.Debugger.Tests.csproj
│   │
│   └── PlusPim.Integration.Tests/
│       └── PlusPim.Integration.Tests.csproj
│
├── docs/
│   ├── requirements/
│   │   └── mips_debugger_requirements.md
│   ├── design/
│   │   ├── architecture_overview.puml
│   │   ├── compiler_layer.puml
│   │   ├── runtime_layer.puml
│   │   ├── presentation_layer.puml
│   │   ├── sequence_diagrams.puml
│   │   └── component_deployment.puml
│   ├── solid_and_patterns.md
│   └── QUICKSTART.md
│
├── .gitignore
├── README.md
└── LICENSE
```

## 作成コマンド

```bash
# 1. ソリューション作成
dotnet new sln -n PlusPim

# 2. プロジェクト作成
dotnet new classlib -n PlusPim.Shared -o src/PlusPim.Shared
dotnet new classlib -n PlusPim.Compiler -o src/PlusPim.Compiler
dotnet new classlib -n PlusPim.Runtime -o src/PlusPim.Runtime
dotnet new classlib -n PlusPim.Debugger -o src/PlusPim.Debugger
dotnet new avalonia.app -n PlusPim.Presentation -o src/PlusPim.Presentation

dotnet new xunit -n PlusPim.Compiler.Tests -o tests/PlusPim.Compiler.Tests
dotnet new xunit -n PlusPim.Runtime.Tests -o tests/PlusPim.Runtime.Tests
dotnet new xunit -n PlusPim.Debugger.Tests -o tests/PlusPim.Debugger.Tests
dotnet new xunit -n PlusPim.Integration.Tests -o tests/PlusPim.Integration.Tests

# 3. ソリューションに追加
dotnet sln add src/**/*.csproj
dotnet sln add tests/**/*.csproj

# 4. プロジェクト間参照設定
dotnet add src/PlusPim.Compiler reference src/PlusPim.Shared
dotnet add src/PlusPim.Runtime reference src/PlusPim.Shared
dotnet add src/PlusPim.Debugger reference src/PlusPim.Shared
dotnet add src/PlusPim.Debugger reference src/PlusPim.Runtime
dotnet add src/PlusPim.Presentation reference src/PlusPim.Shared

# テストプロジェクトの参照
dotnet add tests/PlusPim.Compiler.Tests reference src/PlusPim.Compiler
dotnet add tests/PlusPim.Runtime.Tests reference src/PlusPim.Runtime
dotnet add tests/PlusPim.Debugger.Tests reference src/PlusPim.Debugger

# 5. フォルダ作成
mkdir -p docs/requirements docs/design
```

## 依存関係図

```
Presentation
    ↓
  Shared (interfaces only)
    ↑
    ├── Compiler
    ├── Runtime
    └── Debugger
         ↓
       Runtime
```
